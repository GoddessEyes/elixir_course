digraph GS {

    /*
    TODO: style
    - more space between nodes
    - font 'ubuntu mono'
    - better arrows
    */

    node [shape=box];

    a [label=<
       <table border="0" width="170" height="100" cellpadding="3">
       <tr><td width="170" align="center"><b>MyModule/API</b></td></tr>
       <tr><td align="center">start</td></tr>
       <tr><td align="center">add</td></tr>
       <tr><td align="center">stop</td></tr>
       </table>
       >];

    d [label=<
       <table border="0" width="170" height="100" cellpadding="3">
       <tr><td width="170" align="center"><b>MyModule/handlers</b></td></tr>
       <tr><td align="center">handle_call</td></tr>
       <tr><td align="center">handle_cast</td></tr>
       </table>
       >];
    
    b [label=<
       <table border="0" width="170" height="100" cellpadding="3">
       <tr ><td width="170" align="center"><b>OTP/client</b></td></tr>
       <tr><td align="center">call</td></tr>
       <tr><td align="center">cast</td></tr>
       </table>
       >];
    
    c [label=<
       <table border="0" width="170" height="100" cellpadding="3">
       <tr><td width="170" align="center"><b>OTP/server</b></td></tr>
       <tr><td align="center">loop</td></tr>
       </table>
       >];


    edge [weight=1 color=red];
    d -> c -> b -> a;

    edge [weight=1 color=blue];
    a -> b -> c -> d;

    // hidden edges to make proper layout
    edge [weight=1000 color=white];
    a -> d;
    b -> c;
    rank=same {a, b}
    rank=same {d, c}

}
