# Pipeline

Для Эликсир bind оказался неудачным решением просто потому, что его нельзя использовать в инфиксной форме. Но идея связывать таким образом функции не умерла, а трансформировалась в другую форму -- pipeline. И эта форма оказалась удачной и широко используется.

Например, библиотека [Plug](https://hexdocs.pm/plug/readme.html) полностью основана на pipeline. Эта библиотека позволяет делать композицию модулей и функций для обработки http запроса в веб-сервере.

Следущее решение использует те же функции, что и предыдуший вариант -- обертки над BookShop и Validator с прокидыванием state. Но связывать функции мы будем по-другому.

Идея проста -- положить всю цепочку функций в список, пройти по списку, вызвать каждую функцию по-очереди, обработать результат предыдущей функции и передать в следущую. 

Реализация тоже проста: lib/fp.ex

```
  def pipeline(arg, funs) do
    Enum.reduce(funs, {:ok, arg},
      fn
        (f, {:ok, prev_res}) -> f.(prev_res)
        (_, {:error, reason}) -> {:error, reason}
      end)
  end
```

Теперь наше решение выглядит так: lib/solution_5.ex
